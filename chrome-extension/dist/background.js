chrome.runtime.onInstalled.addListener(()=>{console.log("AI Video Tutor extension installed")});chrome.action.onClicked.addListener(e=>{e.id&&chrome.tabs.sendMessage(e.id,{action:"toggleOverlay"})});chrome.runtime.onMessage.addListener((e,a,r)=>{var o;return e.action==="requestTabCapture"?(chrome.tabCapture.getMediaStreamId?chrome.tabCapture.getMediaStreamId({consumerTabId:(o=a.tab)==null?void 0:o.id},t=>{chrome.runtime.lastError?(console.error("Tab capture error:",chrome.runtime.lastError),r({error:chrome.runtime.lastError.message})):r({streamId:t})}):chrome.tabCapture.capture({audio:!0,video:!1},t=>{chrome.runtime.lastError?(console.error("Tab capture error:",chrome.runtime.lastError),r({error:chrome.runtime.lastError.message})):r({stream:t})}),!0):e.action==="getTabAudio"?(chrome.tabCapture.capture({audio:!0,video:!1},t=>{chrome.runtime.lastError?(console.error("Tab capture error:",chrome.runtime.lastError),r({error:chrome.runtime.lastError.message})):r({stream:t})}),!0):(e.action==="startRecording"&&r({success:!0}),e.action==="stopRecording"&&r({success:!0}),!0)});
